# Markdown 编辑器图片上传功能使用指南

## ✨ 功能概述

现在 Markdown 编辑器支持在文章内容中直接插入图片，让你的文章可以图文并茂！

## 📝 使用方法

### 方法一：点击工具栏按钮（推荐）

1. 在编辑文章时，找到工具栏中的 **"🖼️ 图片"** 按钮
2. 点击按钮会弹出文件选择对话框
3. 选择你要上传的图片文件（支持 JPG、PNG、WEBP、GIF）
4. 图片会自动上传并插入到光标位置

### 方法二：拖拽上传（即将支持）

未来版本将支持直接拖拽图片到编辑器中上传。

## 📋 技术规格

### 支持的图片格式
- JPG / JPEG
- PNG
- WEBP
- GIF

### 文件大小限制
- 最大 **5MB**

### 图片处理
- 上传后的图片会自动：
  - 存储到服务器的 `uploads/` 目录
  - 按日期分类存储（年/月/日）
  - 在编辑器中居中显示
  - 添加阴影效果
  - 响应式缩放（不会超出编辑器宽度）

## 🎨 编辑器中的图片样式

插入的图片具有以下特性：
- ✅ 自动居中显示
- ✅ 响应式大小（最大宽度 100%）
- ✅ 圆角边框
- ✅ 阴影效果
- ✅ 鼠标悬停时轻微放大
- ✅ 点击图片可选中（显示蓝色边框）

## 🔧 集成说明

### 前端组件
- **MarkdownEditor.tsx** - 主编辑器组件
  - 添加了 `@tiptap/extension-image` 扩展
  - 实现了图片上传逻辑
  - 工具栏新增图片按钮

- **MarkdownEditor.css** - 样式文件
  - 定义了图片显示样式
  - 添加了交互效果

### 后端 API
- **POST** `/api/upload/image` - 图片上传接口
  - 接收表单数据（multipart/form-data）
  - 返回格式：`{ "url": "/uploads/2025/10/18/xxx.png" }`

## 📸 示例

在编辑器中插入图片后，Markdown 源码会显示为：

```markdown
![](http://localhost:8080/uploads/2025/10/18/xxx.png)
```

渲染后会显示为漂亮的居中图片。

## ⚠️ 注意事项

1. 上传前请确保图片大小不超过 5MB
2. 建议使用压缩后的图片以提升加载速度
3. 图片会永久存储在服务器上，删除文章不会自动删除图片
4. 上传过程中请勿关闭页面

## 🚀 快捷操作

- 点击工具栏按钮选择图片
- 图片上传中会显示 "⏳ 上传中..." 提示
- 上传成功后会显示成功提示
- 上传失败会显示错误信息

## 💡 最佳实践

1. **图片优化**：上传前使用工具压缩图片
2. **合适尺寸**：建议宽度不超过 1200px
3. **命名规范**：使用有意义的文件名
4. **备份原图**：重要图片请保留本地备份

## 🎯 下一步计划

- [ ] 支持拖拽上传
- [ ] 支持粘贴上传（Ctrl+V）
- [ ] 图片编辑功能（裁剪、旋转）
- [ ] 图片画廊管理
- [ ] 批量上传

---

祝你写作愉快！✍️

